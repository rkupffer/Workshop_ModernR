<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Modern R</title>
    <meta charset="utf-8" />
    <meta name="author" content="David Izydorczyk" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/nouislider/jquery.nouislider.min.css" rel="stylesheet" />
    <script src="libs/nouislider/jquery.nouislider.min.js"></script>
    <link href="libs/selectize/selectize.bootstrap3.css" rel="stylesheet" />
    <script src="libs/selectize/selectize.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <script src="libs/plotly-binding/plotly.js"></script>
    <script src="libs/typedarray/typedarray.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="subfiles\my-theme.css" type="text/css" />
    <link rel="stylesheet" href="subfiles\my-fonts.css" type="text/css" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Modern R
## From R Markdown to Shiny
### David Izydorczyk
### 12.05.2020

---







## Workshop

This workshop consists of three parts:

1. Introduction to R Markdown
2. Writing scientific articles with the [papaja](https://github.com/crsh/papaja) package
3. Introduction to Shiny Applications 

&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Learning Goals

At the end of this workshop, you should be able to:

- Know what `RMarkdown` is and how it works

- Know how to integrate code and data with `RMarkdown`

- Write APA conform manuscripts with the `papaja`-package

- Develop and deploy your own shiny app



&lt;!-- *********** HEADING ************** --&gt;
---
class: heading,middle


Part 1: Introduction to R Markdown



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Why use R Markdown in the first place?

- `R Markdown` makes it easy to combine the power of `R` with the simplicity of Markdown documents

- `R` code and interpretations integrated into a single reproducible document, which can be easily shared
  - with your collaborators/colleagues
  - on OSF
  - or for your later self

- Separate the tasks of *reporting* the results (fun) from *formatting* the results (boring), which
  - decreases risk of copy-paste errors
  - decreases workload
  
- Has many applications:
  - make [presentations](https://bookdown.org/yihui/rmarkdown/presentations.html)
  - write scientific manuscripts with [papaja](https://github.com/crsh/papaja)
  - write books with [bookdown](https://bookdown.org/), e.g. https://bookdown.org/content/3686/
  - create websites with [blogdown](https://bookdown.org/yihui/blogdown/)

&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## How does it work ? 


![Source rstudio.com](images/rmarkdownflow.png)
Source: rstudio.com


- Creating documents with `R Markdown` starts with an .Rmd file that contains a *combination* of **markdown** (content with simple text formatting) and **R code chunks**.

- The .Rmd file is fed to **knitr**, which executes all of the R code chunks and creates a new markdown (.md) document which includes the R code and itâ€™s output.

- The markdown file generated by knitr is then processed by **pandoc** which is responsible for creating a finished  PDF, MS Word document, slide show, etc.


&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Getting Started - Creating a Markdown document

.center[
&lt;img src="images/getting_started.png", width="90%"&gt;
]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class:content
## Structure

.pull-left3[
An `RMarkdown` document consists of 
- A YAML  header 
- Text
- Code Chunks
  - Setup Chunk
  - Other Chunks
- Inline Code

]
.pull-right3[
&lt;img src="images/structure.png", width="100%"&gt;
]

&lt;!-- *********** HEADING ************** --&gt;
---
class: heading, middle

YAML Header

&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## YAML


```r
---
title: "My Title"
author: "Max Musterman"
date: "22 04 2020"
output: html_document
---
```

- `YAML` Stands for "YAML Ain't Markup Language"
- This is where you set options for your overall document
- See the Cheat-Sheet or https://rmarkdown.rstudio.com/html_document_format.html

&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## YAML - Output

For example, you can change the [output format](https://rmarkdown.rstudio.com/formats.html) (`html_document`, `pdf_document`, `word_document`, `github_document`, ...)



.pull-left[


```r
---
title: "My Title"
author: "Max Musterman"
date: "22 04 2020"
*output: pdf_document
---
```

&lt;img src="images/example_pdf.png", width="100%"&gt;
]


.pull-right[


```r
---
title: "My Title"
author: "Max Musterman"
date: "22 04 2020"
*output: word_document
---
```

&lt;img src="images/example_word.png", width="100%"&gt;
]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## YAML - Table of Contents

... add and format the table of contents 


.pull-left[


```r
---
title: "My Title"
author: "Max Musterman"
date: "22 04 2020"
output:            
    html_document: 
*     toc: TRUE
*     toc_depth: 2
---
```

&lt;img src="images/example_toc.png", width="100%"&gt;
]


.pull-right[


```r
---
title: "My Title"
author: "Max Musterman"
date: "22 04 2020"
output:            
    html_document: 
      toc: TRUE      
      toc_depth: 2
*     toc_float: true
---
```

&lt;img src="images/example_toc_float.png", width="100%"&gt;
]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## YAML - Appearance

... change the appearance of [themes](https://www.datadreaming.org/post/r-markdown-theme-gallery/) and [code syntax](https://www.garrickadenbuie.com/blog/pandoc-syntax-highlighting-examples/) 


.pull-left[


```r
---
title: "My Title"
author: "Max Musterman"
date: "22 04 2020"
output:            
    html_document
---
```

&lt;img src="images/example_code0.png", width="100%"&gt;
]


.pull-right[


```r
---
title: "My Title"
author: "Max Musterman"
date: "22 04 2020"
output:            
    html_document: 
*     theme: journal
*     highlight: breezedark
---
```

&lt;img src="images/example_code1.png", width="80%"&gt;
]


&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## YAML - Code Chunks

... make code chunks foldable (`show/hide` as default): 



```r
---
title: "My Title"
author: "Max Musterman"
date: "22 04 2020"
output:            
    html_document: 
*     code_folding: show
---
```


.center[
&lt;img src="images/example_code_folding.png", width="50%"&gt;

]

&lt;!-- *********** HEADING ************** --&gt;
---
class: heading, middle

Text Formatting

&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Sections 

See also the Cheat-Sheet and https://rmarkdown.rstudio.com/authoring_basics.html

.pull-left[
Levels of Headings


```r
# Section 1
bla

## Section 1.1
bla

### Section 1.1.1
bla

#### Section 1.1.1.1
```
]

.pull-right[

# Section 1
bla
## Sub-Section 1.1
bla
### Paragraph 1.1.1
bla
#### Sub-Paragraph 1.1.1.1

]

You can use also use the options `number_sections: true` in the YAML header

&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: small

## Text Formatting 

.pull-left[
Emphasis

```r
__bold__  (or use *)
_italic_
~~strikethrough~~
```

***
Lists

```r
- unordered list 
    - sub-item 1 
     
1. ordered list 
2. item 2 
    + sub-item 1 
```

***
Tables


```r
Table Header  | Second Header 
------------- | ------------- 
Table Cell    | Cell 2        
Cell 3        | Cell 4
```

]

.pull-right[

&lt;br&gt;

- __bold__  (or use *)
- _italic_
- ~~strikethrough~~

***
- unordered list 
- item 2 
    - sub-item 1 
    
     
1. ordered list 
2. item 2 
    1. sub-item 1 

***
&lt;br&gt;

Table Header  | Second Header 
------------- | ------------- 
Table Cell    | Cell 2        
Cell 3        | Cell 4

]


&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Links &amp; Images



.pull-left[
You can also add links


```r
[Click me!](https://google.com/)
```

[Click me!](https://google.com/)
]

.pull-right[

or images (see [here](https://stackoverflow.com/questions/25166624/insert-picture-table-in-r-markdown) for other ways to add images)


```r
![](images/cat.jpg)
```

![](images/cat.jpg)
]


&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## HTML &amp; LaTeX




You can also directly use `HTML` code


```r
&lt;b&gt; this is bold &lt;/b&gt;

&lt;font color ="#FF8C00"&gt;Orange text&lt;/font&gt;
```

&lt;b&gt; this is bold &lt;/b&gt;
&lt;font color ="#FF8C00"&gt;Orange text&lt;/font&gt;

***

or Math expressions with `LaTeX`


```r
`\(f(k) = {n \choose k} p^{k} (1-p)^{n-k}\)`
```

`\(f(k) = {n \choose k} p^{k} (1-p)^{n-k}\)`

use `$$` for display style (same as `"\begin{equation} ... \end{equation}"`)

`$$f(k) = {n \choose k} p^{k} (1-p)^{n-k}$$`


&lt;!-- *********** HEADING ************** --&gt;
---
class: heading, middle

R Code 

&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Code chunks
.pull-left2[
- You can create code chunks with the shortcut &lt;kbd&gt;Strg&lt;/kbd&gt;+&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;I&lt;/kbd&gt;.

- Run a code chunk with &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Shift&lt;/kbd&gt; + &lt;kbd&gt;Enter&lt;/kbd&gt;

````
```{r}
4 + 2
rnorm(2)
```




```r
4 + 2
```

```
## [1] 6
```

```r
rnorm(2)
```

```
## [1] -1.0513453 -0.7532981
```
]


.pull-right2[
Some important chunk options (see also [here](https://yihui.org/knitr/options/#chunk-options)):

-  names -&gt; will show up in the outline
- `echo`: Display code in output document (default = `TRUE`)
- `include`: Include chunk and output in doc after running (default = `TRUE`)
- `fig.height` and `fig.width`: Dimensions of plots in inches
- `error`: Display error messages in doc (`TRUE`) or stop render when errors occur (`FALSE`) (default = `FALSE`)
- `warning`: display code warnings in document (default = `TRUE`)
- `results`: How to format results:
  - default = `'markup'`
  - `'asis'` - pass through results
  - `'hide'` - do not display results
- `cache`: cache results for future knits (default = `FALSE`)
]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Inline R Code

You can use inline `R` code like this: 


```r
This is the mean `r mean(rnorm(100))` 
```

becomes: This is the mean 0.1189364 


&lt;br&gt;&lt;br&gt;

And you can combine it with `LaTeX` math expressions


```r
This is the mean `\(M_{age} = `r rnorm(100,22,10) %&gt;% mean() %&gt;%  round()`\)`
```

becomes: This is the mean `\(M_{age} = 22\)`


&lt;!-- *********** HEADING ************** --&gt;
---
class: heading, middle

Taking Advantage of R


&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Make nicer tables  with kableExtra and DT 

Normal Output: 


```r
head(iris,10)
```

```
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa
```

&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Make nicer tables  with kableExtra and DT 

With `kable()`: 


```r
library(kableExtra)

kable(head(iris,10))
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Sepal.Length &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Sepal.Width &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Petal.Length &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Petal.Width &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Species &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.3 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Make nicer tables  with kableExtra and DT 

With  `datatable()` from the [DT package](/https://rstudio.github.io/DT/) : 


```r
library(DT)
DT::datatable(head(iris,10),
          filter  = list(position = 'top', clear = TRUE, plain = FALSE),
          options = list(
            lengthMenu = list(c(2, 3 , -1), c('2', '3',  'All')), pageLength = 3
          ))
```

<div id="htmlwidget-4af27046d59ac9dc1d24" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4af27046d59ac9dc1d24">{"x":{"filter":"top","filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"4.4\" data-max=\"5.4\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"2.9\" data-max=\"3.9\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1.3\" data-max=\"1.7\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0.1\" data-max=\"0.4\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"disabled\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10"],[5.1,4.9,4.7,4.6,5,5.4,4.6,5,4.4,4.9],[3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1],[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5],[0.2,0.2,0.2,0.2,0.2,0.4,0.3,0.2,0.2,0.1],["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Sepal.Length<\/th>\n      <th>Sepal.Width<\/th>\n      <th>Petal.Length<\/th>\n      <th>Petal.Width<\/th>\n      <th>Species<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"lengthMenu":[[2,3,-1],["2","3","All"]],"pageLength":3,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>


&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Make nicer tables  with kableExtra and DT 

Also check out the YAML option `df_print: paged`



.pull-left[


```r
---
title: "Untitled"
author: "David Izydorczyk"
date: "22 4 2020"
output: 
  html_document
---
```

&lt;img src="images/example_paged0.png", width="50%"&gt;
]


.pull-right[


```r
---
title: "Untitled"
author: "David Izydorczyk"
date: "22 4 2020"
output: 
  html_document:
*   df_print: paged
---
```

&lt;img src="images/example_paged1.png", width="50%"&gt;
]


&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Nicer output  with [broom](https://cran.r-project.org/web/packages/broom/vignettes/broom.html)

From the documentation: "The [broom](https://cran.r-project.org/web/packages/broom/vignettes/broom.html) package takes the messy output of built-in functions in R, such as lm, nls, or t.test, and turns them into tidy data frames."

Works with results from `lm, glm, t.test, cor.test, wilcox.text (and lme4 with broom.mixed)`


.pull-left[
Normal `lm()` output: 

![lm0](images/example_lm0.PNG)

]
.pull-right[
With `tidy()` from `broom` :

![lm1](images/example_lm1.PNG)

]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Make nicer plots with [plotly](https://plotly-r.com/index.html)   

.pull-left[
Normal `ggplot2` output: 


```r
library(ggplot2)

ggplot(chickwts,aes(x=feed,y=weight)) +
  geom_boxplot() +
  theme_bw()
```

![](Part1_Markdown_files/figure-html/unnamed-chunk-25-1.svg)&lt;!-- --&gt;

]
.pull-right[
With plotly


```r
library(plotly)

p &lt;- ggplot(chickwts,aes(x=feed,y=weight)) +
        geom_boxplot() +
        theme_bw()
*ggplotly(p)
```

<div id="htmlwidget-8178a96b563bbd2e5215" style="width:432px;height:324px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-8178a96b563bbd2e5215">{"x":{"data":[{"x":[2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1],"y":[179,160,136,227,217,168,108,124,143,140,309,229,181,141,260,203,148,169,213,257,244,271,243,230,248,327,329,250,193,271,316,267,199,171,158,248,423,340,392,339,341,226,320,295,334,322,297,318,325,257,303,315,380,153,263,242,206,344,258,368,390,379,260,404,318,352,359,216,222,283,332],"hoverinfo":"y","type":"box","fillcolor":"rgba(255,255,255,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"},"size":5.66929133858268},"line":{"color":"rgba(51,51,51,1)","width":1.88976377952756},"showlegend":false,"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":25.7412480974125,"r":7.30593607305936,"b":39.6955859969559,"l":43.1050228310502},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,6.6],"tickmode":"array","ticktext":["casein","horsebean","linseed","meatmeal","soybean","sunflower"],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":["casein","horsebean","linseed","meatmeal","soybean","sunflower"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"feed","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[92.25,438.75],"tickmode":"array","ticktext":["100","200","300","400"],"tickvals":[100,200,300,400],"categoryorder":"array","categoryarray":["100","200","300","400"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"weight","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"bc987c43151":{"x":{},"y":{},"type":"box"}},"cur_data":"bc987c43151","visdat":{"bc987c43151":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
]


&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Make gifs with  [gganimate](https://gganimate.com/) 



```r
library(gganimate)

N      = 500
pHeads = 0.5
 
flipSequence &lt;- sample(x=c(0,1),prob = c(1-pHeads,pHeads),size=N,replace=T)
flip_data    &lt;- data.frame(run=1:N,prop=cumsum(flipSequence)/1:N)

g &lt;- ggplot(flip_data,aes(x=run,y=prop,frame=run)) +
      geom_line(size=1)+
      geom_segment(aes(xend = N-20, yend = prop), linetype = 2, colour = 'grey') + 
      geom_point(aes(x = run),color = "tomato1",size = 2) + 
      geom_text(aes(x = N-20, label = round(prop,2)), hjust = 0) +
      xlim(1,500)+ylim(0.0,1.0)+
      geom_hline(yintercept = pHeads)+
      ggtitle("Running Proportion Heads of Unbiased Coin")+
      ylab("Proportion of Heads")+
      xlab("Flip Number") +
      theme_bw()+
      transition_reveal(run) +
      coord_cartesian(clip = 'off') 
```

---


```r
animate(g, height = 400, width = 700,nframes=50,fps=10)
```

![](Part1_Markdown_files/figure-html/unnamed-chunk-27-1.gif)&lt;!-- --&gt;


&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: small
## Interactive Plots with runtime: shiny 

You can also use shiny elements in your HTML - Markdown document or presentation


```r
---
title: "Untitled"
author: "David Izydorczyk"
date: "22 4 2020"
output: html_document
*runtime: shiny
---

# start code chunk ```{r}

library(dplyr)
library(ggplot2)
  
inputPanel(
  numericInput("Mean"  , label = "Mean" ,value = 0)
)

# This functionblock gets executed everytime one of the input changes

renderPlot({

m   &lt;- input$Mean
  
rnorm(100,m,5) %&gt;% as.data.frame %&gt;% 
 ggplot(aes(x=.)) +
  geom_histogram(aes(y=..density..)) +
  geom_density(aes(y=..density..),fill="tomato1",alpha=0.4) +
  theme_bw()
})
# end code chunk 
```



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Now it's your turn !

Create an `RMarkdown` file and delete everything execpt the YAML header and the setup chunk

Create the following section structure:
  1. Setup
    1.1 Packages 
    1.2 Data
  2. Summary
  3. Plot
  
Load the `ggplot2` package (`library(ggplot2)`) in a code chunk in the `1.1 Package` section you just created

Load the [happiness2017](https://www.kaggle.com/unsdsn/world-happiness/version/2#2017.csv) from the data folder in a code chunk in the `Data` section (`read.csv("Part 1 - Markdown/Data/happines2017")`)

Print the top of the dataframe (`data[1:5,]`)) in a code chunk in the `Summary` section, try using `datatable()` or  `kable()` (maybe you need to install the `DT` and the `kableExtra`packages first).

Compute some summaries or linear regression (e.g. using `summary()/lm()`) for some variables you are interested in, in a code chunk in the `Summary` section.

&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Now it's your turn !

Write some text describing the results using some of the text formatting options and inline R-code. 

Write some math expressions with `LaTeX`. 

Plot the `happiness.Score` of a country by its GPD (`Economy..GDP.per.Capita.`) or anything else that you are interested in, e.g. by using `ggplot(data,aes(x = Happiness.Score, y = Economy..GDP.per.Capita.))+geom_point()`.  Try using `ggplotly`.

Play around with YAML options, add some table of content, change the output format.

Play around with the chunk options, what happens if you set a chunk to `echo=FALSE` or `include = FALSE` ? 





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
## Helpful references:

- https://bookdown.org/yihui/rmarkdown
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"ratio": "16:9",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
